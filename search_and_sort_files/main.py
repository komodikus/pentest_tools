from tkinter import filedialog
from tkinter import Tk
import os
import shutil
from variables import default_dir, folder_to_copy, neededs_formats


def create_folder_for_format(folder_to_copy, file_format):
    if not os.path.exists(folder_to_copy + '/{}'.format(file_format)):
        os.makedirs(folder_to_copy + '/{}'.format(file_format))


def get_full_path_name(main_folder, file_name):
    return main_folder + '\\' + file_name


def is_file_format(file, format):
    if file.endswith('.{}'.format(format)):
        return True
    else:
        return False


for i in neededs_formats:
    create_folder_for_format(folder_to_copy, i)

if __name__ == '__main__':
    main_path = filedialog.askdirectory(initialdir=default_dir, title="Select the Folder")
    root = Tk()
    root.withdraw()


    for (dirpath, dirnames, filenames) in os.walk(main_path):
        if len(filenames)<2:
            check_format = filenames[0][-3:]
            if check_format in neededs_formats:
                shutil.copy(get_full_path_name(dirpath, *filenames), "{}\{}".format(folder_to_copy, check_format))
        else:
            for finded_file in filenames:
                check_format = finded_file[-3:]
                shutil.copy(get_full_path_name(dirpath, finded_file), "{}\{}".format(folder_to_copy, check_format))

    print("Its all right")





